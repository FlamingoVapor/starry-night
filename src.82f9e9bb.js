parcelRequire=function(e,r,n){var t="function"==typeof parcelRequire&&parcelRequire,i="function"==typeof require&&require;function u(n,o){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!o&&f)return f(n,!0);if(t)return t(n,!0);if(i&&"string"==typeof n)return i(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}a.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,a,l,l.exports)}return r[n].exports;function a(e){return u(a.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=t;for(var o=0;o<n.length;o++)u(n[o]);return u}({20:[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.AtomConfig=function e(){t(this,e),this.background="rgb(0, 0, 0)",this.timerRateMs=1e3/60};
},{}],12:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AtomService=void 0;var o=require("../../domain/Atom/AtomConfig");function e(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}var t=exports.AtomService=function t(){e(this,t),this.config=new o.AtomConfig};
},{"../../domain/Atom/AtomConfig":20}],21:[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=exports.Building=function i(){t(this,i),this.beginX=0,this.height=0,this.style=0,this.width=0,this.zCoordinate=0};
},{}],22:[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=exports.BuildingConfig=function i(){t(this,i),this.color="rgb(248, 241, 3)",this.count=100,this.heightPercent=50,this.maxWidth=18,this.minWidth=5,this.pixelsPerUpdate=15};
},{}],18:[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.Flasher=function e(){t(this,e),this.on=!1,this.time=0,this.x=0,this.y=0};
},{}],19:[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=exports.FlasherConfig=function t(){e(this,t),this.color="rgb(190, 0, 0)",this.enabled=!0,this.periodMs=1700};
},{}],14:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FlasherService=void 0;var e=function(){function e(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,i,t){return i&&e(r.prototype,i),t&&e(r,t),r}}(),r=require("../../domain/Flasher/Flasher"),i=require("../../domain/Flasher/FlasherConfig"),t=require("../Atom/AtomService");function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var n=exports.FlasherService=function(){function t(e){s(this,t),this.props=e,this.config=new i.FlasherConfig,this.flasher=new r.Flasher}return e(t,[{key:"drawFlasher",value:function(){var e=!1;if(!1!==this.config.enabled){var r=this.props,i=r.atomService,t=r.context;this.flasher.time+=i.config.timerRateMs,this.flasher.time>=this.config.periodMs&&(this.flasher.time-=this.config.periodMs,!1===this.flasher.on?this.flasher.on=!0:(this.flasher.on=!1,e=!0)),!1===this.flasher.on&&!1===e||(t.beginPath(),t.arc(this.flasher.x,this.flasher.y,3.5,0,2*Math.PI,!1),!1===this.flasher.on?t.fillStyle=this.config.color:t.fillStyle=i.config.background,t.fill())}else this.flasher.on=!1}}]),t}();
},{"../../domain/Flasher/Flasher":18,"../../domain/Flasher/FlasherConfig":19,"../Atom/AtomService":12}],23:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.buildingTiles=[[[0,0,0,0,1,0,0,1],[0,0,0,0,1,0,0,1],[0,0,0,0,1,0,0,1],[0,0,0,0,1,0,0,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[1,1,0,0,1,1,0,0],[1,1,0,0,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,1,0,1,0,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[1,0,0,0,1,0,0,0],[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0],[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,1,1,0,1,1,0,0],[0,1,1,0,1,1,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]],t=exports.tileHeight=e[0].length,i=exports.tileWidth=e[0][0].length,l=exports.buildingStyleCount=e.length;
},{}],13:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BuildingService=void 0;var i=function(){function i(i,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}}(),t=require("../../domain/Building/Building"),n=require("../../domain/Building/BuildingConfig"),e=require("../Flasher/FlasherService"),h=require("./BuildingTiles");function s(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var o=exports.BuildingService=function(){function e(i){s(this,e),this.props=i,this.buildings=[new t.Building],this.config=new n.BuildingConfig}return i(e,[{key:"drawBuildings",value:function(){for(var i=this.props,t=i.context,n=i.flasherService,e=t.canvas,s=e.height,o=e.width,r=0,l=n.flasher.y,a=s-l,g=0,u=0,d=0,c=0,f=0,b=0;b<this.config.pixelsPerUpdate;b++)g=Math.floor(Math.random()*o),u=l+Math.floor(Math.random()*a),-1!==(r=this.getTopBuilding(g,u))&&(c=(g-this.buildings[r].beginX)%h.tileWidth,f=u%h.tileHeight,d=this.buildings[r].style,0!==h.buildingTiles[d][f][c]&&(t.fillStyle=this.config.color,t.fillRect(g,u,1,1)))}},{key:"getTopBuilding",value:function(i,t){for(var n=0,e=0,s=-1,o=0,r=this.props.context.canvas.height,l=0;l<this.config.count&&!(this.buildings[l].beginX>i);l++)e=r-this.buildings[l].height*h.tileHeight,n=this.buildings[l].beginX+this.buildings[l].width*h.tileWidth,i>=this.buildings[l].beginX&&i<n&&t>e&&this.buildings[l].zCoordinate>o&&(s=l,o=this.buildings[l].zCoordinate);return s}},{key:"init",value:function(){this.checkSanity();var i,n=0,e=0,s=this.props.context.canvas,o=s.height,r=s.width;this.buildings=[],n=0,i=Math.ceil(o*(this.config.heightPercent/100)/h.tileHeight);for(var l=0;l<this.config.count;l++){var a=new t.Building;a.style=Math.floor(Math.random()*h.buildingStyleCount),a.height=Math.ceil(Math.pow(Math.random(),2)*i),a.width=this.config.minWidth+Math.floor(Math.random()*(this.config.maxWidth-this.config.minWidth)),a.beginX=Math.floor(Math.random()*r),a.zCoordinate=l+1,a.height>n&&(n=a.height,e=l),this.buildings.push(a)}this.setFlasherAtTop(e),this.sortByX()}},{key:"checkSanity",value:function(){0===this.config.minWidth&&(this.config.minWidth=1),this.config.maxWidth<this.config.minWidth&&(this.config.maxWidth=this.config.minWidth+1)}},{key:"setFlasherAtTop",value:function(i){var t=this.props,n=t.context,e=t.flasherService;e.flasher.on=!1,e.flasher.time=0,e.flasher.x=this.buildings[i].beginX+this.buildings[i].width*h.tileWidth/2,e.flasher.y=n.canvas.height-this.buildings[i].height*h.tileHeight}},{key:"sortByX",value:function(){for(var i=0,n=0,e=new t.Building,h=this.props.context.canvas.width,s=0;s<this.config.count-1;s+=1){i=h,n=-1;for(var o=s;o<this.config.count;o+=1)this.buildings[o].beginX<i&&(i=this.buildings[o].beginX,n=o);s!==n&&(e=this.buildings[s],this.buildings[s]=this.buildings[n],this.buildings[n]=e)}}}]),e}();
},{"../../domain/Building/Building":21,"../../domain/Building/BuildingConfig":22,"../Flasher/FlasherService":14,"./BuildingTiles":23}],24:[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=exports.RainConfig=function i(){t(this,i),this.dropsPerUpdate=15,this.maxWidth=16,this.minWidth=2};
},{}],15:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RainService=void 0;var e=function(){function e(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,i,t){return i&&e(n.prototype,i),t&&e(n,t),n}}(),n=require("../../domain/Rain/RainConfig"),i=require("../Atom/AtomService");function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=exports.RainService=function(){function i(e){t(this,i),this.props=e,this.config=new n.RainConfig}return e(i,[{key:"drawRain",value:function(){for(var e=0,n=0,i=this.props,t=i.atomService,o=i.context,r=o.canvas,a=r.height,c=r.width,f=0;f<this.config.dropsPerUpdate;f++)o.lineWidth=this.config.minWidth+Math.floor(Math.random()*(this.config.maxWidth-this.config.minWidth)),e=Math.floor(Math.random()*c),n=Math.floor(Math.random()*a),o.strokeStyle=t.config.background,o.beginPath(),o.moveTo(e,n),o.lineTo(e+1,n+1),o.stroke()}}]),i}();
},{"../../domain/Rain/RainConfig":24,"../Atom/AtomService":12}],25:[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=exports.ShootingStar=function i(){t(this,i),this.active=!1,this.duration=0,this.startX=0,this.startY=0,this.time=0,this.velocityX=0,this.velocityY=0};
},{}],26:[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.ShootingStarConfig=function e(){t(this,e),this.color="rgb(100, 0, 0)",this.maxDurationMs=1e3,this.maxPeriodMs=25e3,this.maxSpeedX=3,this.maxSpeedY=1,this.maxWidth=4,this.minSpeedY=.1};
},{}],16:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShootingStarService=void 0;var t=function(){function t(t,i){for(var o=0;o<i.length;o++){var e=i[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,o,e){return o&&t(i.prototype,o),e&&t(i,e),i}}(),i=require("../../domain/ShootingStar/ShootingStar"),o=require("../../domain/ShootingStar/ShootingStarConfig"),e=require("../Atom/AtomService"),n=require("../Building/BuildingService"),r=require("../Building/BuildingTiles");function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var h=exports.ShootingStarService=function(){function e(t){a(this,e),this.props=t,this.config=new o.ShootingStarConfig,this.shootingStar=new i.ShootingStar}return t(e,[{key:"drawShootingStar",value:function(){var t,i,o=this.props,e=o.atomService,n=o.buildingService,a=o.context,h=a.canvas,s=h.height,g=h.width,S=s-s*n.config.heightPercent/100/r.tileHeight,c=0,l=0;if(!1===this.shootingStar.active){if(!(this.shootingStar.time<=e.config.timerRateMs))return void(this.shootingStar.time-=e.config.timerRateMs);this.shootingStar.time=0,this.shootingStar.active=!0,this.shootingStar.startX=Math.floor(Math.random()*g),this.shootingStar.startY=Math.floor(Math.pow(Math.random(),2)*S),this.shootingStar.duration=Math.ceil(Math.random()*this.config.maxDurationMs),this.shootingStar.velocityX=Math.random()*(2*this.config.maxSpeedX)-this.config.maxSpeedX,this.shootingStar.velocityY=Math.random()*(this.config.maxSpeedY-this.config.minSpeedY)+this.config.minSpeedY}a.lineWidth=this.config.maxWidth,t=this.shootingStar.startX+Math.ceil(this.shootingStar.time*this.shootingStar.velocityX),i=this.shootingStar.startY+Math.ceil(this.shootingStar.time*this.shootingStar.velocityY),this.shootingStar.time<this.shootingStar.duration&&(c=t+Math.ceil(e.config.timerRateMs*this.shootingStar.velocityX),l=i+Math.ceil(e.config.timerRateMs*this.shootingStar.velocityY),-1!==this.props.buildingService.getTopBuilding(c,l)?this.shootingStar.time=this.shootingStar.duration:(a.strokeStyle=this.config.color,a.beginPath(),a.moveTo(t,i),a.lineTo(c,l),a.stroke())),a.lineWidth=this.config.maxWidth+1,a.strokeStyle=e.config.background,a.beginPath(),a.moveTo(this.shootingStar.startX,this.shootingStar.startY),a.lineTo(t,i),a.stroke(),this.shootingStar.time<this.shootingStar.duration?this.shootingStar.time+=e.config.timerRateMs:(this.shootingStar.active=!1,this.shootingStar.time=Math.ceil(Math.random()*this.config.maxPeriodMs))}}]),e}();
},{"../../domain/ShootingStar/ShootingStar":25,"../../domain/ShootingStar/ShootingStarConfig":26,"../Atom/AtomService":12,"../Building/BuildingService":13,"../Building/BuildingTiles":23}],27:[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.StarConfig=function e(){t(this,e),this.starsPerUpdate=12};
},{}],17:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StarService=void 0;var r=function(){function r(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t}}(),t=require("../../domain/Star/StarConfig"),e=require("../Building/BuildingService");function o(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var a=exports.StarService=function(){function e(r){o(this,e),this.props=r,this.config=new t.StarConfig}return r(e,[{key:"drawStars",value:function(){for(var r=this.props,t=r.buildingService,e=r.context,o=0,a=0,n=e.canvas,i=n.height,f=n.width,l=0;l<this.config.starsPerUpdate;l++)if(o=Math.floor(Math.random()*f),a=Math.floor(Math.pow(Math.random(),2)*i),-1===t.getTopBuilding(o,a)){var u=Math.floor(180*Math.random()),c=Math.floor(180*Math.random()),h=Math.floor(256*Math.random());e.fillStyle="rgb("+u+", "+c+", "+h+")",e.fillRect(o,a,1,1)}}}]),e}();
},{"../../domain/Star/StarConfig":27,"../Building/BuildingService":13}],11:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.App=void 0;var e=function(){function e(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,i,t){return i&&e(r.prototype,i),t&&e(r,t),r}}(),r=require("./Atom/AtomService"),i=require("./Building/BuildingService"),t=require("./Flasher/FlasherService"),a=require("./Rain/RainService"),n=require("./ShootingStar/ShootingStarService"),o=require("./Star/StarService");function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var c=exports.App=function(){function r(e){s(this,r),this.props=e,this.stop=!0}return e(r,[{key:"init",value:function(){var e=this.props,r=e.atomService,i=e.buildingService,t=e.context;t.canvas.width=t.canvas.offsetWidth,t.canvas.height=t.canvas.offsetHeight,t.rect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=r.config.background,t.fill(),i.init(),this.update()}},{key:"update",value:function(){var e=this;this.stop=!1;var r=this.props,i=r.buildingService,t=r.flasherService,a=r.rainService,n=r.shootingStarService;r.starService.drawStars(),i.drawBuildings(),a.drawRain(),n.drawShootingStar(),t.drawFlasher(),requestAnimationFrame(function(){!0!==e.stop&&e.update()})}}]),r}();
},{"./Atom/AtomService":12,"./Building/BuildingService":13,"./Flasher/FlasherService":14,"./Rain/RainService":15,"./ShootingStar/ShootingStarService":16,"./Star/StarService":17}],10:[function(require,module,exports) {
"use strict";var e=require("./app/App"),i=require("./app/Atom/AtomService"),r=require("./app/Building/BuildingService"),t=require("./app/Flasher/FlasherService"),n=require("./app/Rain/RainService"),o=require("./app/ShootingStar/ShootingStarService"),c=require("./app/Star/StarService");window.requestAnimationFrame=window.requestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)};var a=window;a.onload=function(){var S=document.getElementById("city").getContext("2d"),v=new i.AtomService,u=new t.FlasherService({atomService:v,context:S}),p=new n.RainService({atomService:v,context:S}),m=new r.BuildingService({context:S,flasherService:u}),s=new o.ShootingStarService({atomService:v,buildingService:m,context:S}),w=new c.StarService({buildingService:m,context:S}),d=new e.App({atomService:v,buildingService:m,context:S,flasherService:u,rainService:p,shootingStarService:s,starService:w});d.init(),a.onresize=function(){d.stop=!0,setTimeout(function(){return d.init()},500)}};
},{"./app/App":11,"./app/Atom/AtomService":12,"./app/Building/BuildingService":13,"./app/Flasher/FlasherService":14,"./app/Rain/RainService":15,"./app/ShootingStar/ShootingStarService":16,"./app/Star/StarService":17}]},{},[10])
//# sourceMappingURL=/src.82f9e9bb.map